<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pattern Checker</title>
    <!-- Tailwind CSS CDN for utility-first styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter for a modern, clean typeface -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Custom styles to ensure Inter font is applied globally */
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* Basic styling for Lucide icons */
        .lucide {
            display: inline-block;
            width: 1.5em;
            height: 1.5em;
            stroke-width: 2;
            stroke: currentColor;
            fill: none;
            stroke-linecap: round;
            stroke-linejoin: round;
        }
        /* Modal Overlay styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 1rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
            transform: translateY(20px);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        .modal-overlay.show .modal-content {
            transform: translateY(0);
            opacity: 1;
        }
        /* Copy message styles */
        .copy-message {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #4CAF50; /* Green */
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 0.9rem;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            z-index: 1001;
        }
        .copy-message.show {
            opacity: 1;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 flex flex-col items-center py-12 px-4 antialiased">
    <!-- Lucide Icons Script - Must be loaded before icons are used -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Header Section -->
    <header class="w-full max-w-2xl bg-white p-8 rounded-2xl shadow-xl mb-8 text-center border border-gray-100">
        <h1 class="text-5xl font-extrabold text-gray-900 flex items-center justify-center space-x-4">
            <!-- Lucide Icon for Search -->
            <svg class="lucide lucide-search w-12 h-12 text-blue-600" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.3-4.3"></path>
            </svg>
            <span class="bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-700">Pattern Checker</span>
        </h1>
    </header>

    <!-- Main Content Area - Single Search Input and Options -->
    <main class="w-full max-w-2xl space-y-8">
        <!-- Search Input Section -->
        <section class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100">
            <label for="patternInput" class="sr-only">Search for pattern</label>
            <input
                type="text"
                id="patternInput"
                class="w-full p-4 border border-gray-200 rounded-lg focus:ring-blue-500 focus:border-blue-500 text-gray-700 text-lg transition-all duration-200 hover:border-blue-300 placeholder-gray-400"
                placeholder="e.g., Gamer, PC, or 0.1, 0.2"
                spellcheck="false"
            />
            <div class="mt-4 flex items-center justify-end">
                <label for="patternDisplayOption" class="text-gray-600 text-sm mr-2">Display:</label>
                <select id="patternDisplayOption" class="p-2 border border-gray-200 rounded-lg text-gray-700 text-sm focus:ring-blue-500 focus:border-blue-500">
                    <option value="full">Full Pattern</option>
                    <option value="first5">First 5 Elements</option>
                    <option value="compressed">Compressed (e.g., 0.1<sup>3</sup>)</option>
                </select>
            </div>
        </section>

        <!-- Results Display Section -->
        <section class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100 min-h-[10rem] flex items-center justify-center">
            <div id="result" class="w-full">
                <p class="text-gray-400 italic text-center">
                    Enter a category, model, or numerical pattern to find matches.
                </p>
            </div>
        </section>
    </main>

    <!-- Footer Section -->
    <footer class="w-full max-w-2xl bg-gray-900 text-white p-6 rounded-2xl shadow-xl mt-8 text-center">
        <p class="text-lg">&copy; 2025 Pattern Checker. All rights reserved.</p>
        <p class="text-sm text-gray-400 mt-2">Built with HTML, JavaScript, Tailwind CSS, and Lucide Icons.</p>
        <!-- New section for Voxel Links - now populated by JavaScript -->
        <div class="mt-6 pt-4 border-t border-gray-700">
            <h3 class="text-xl font-semibold text-blue-300 mb-3">Official Voxel Links</h3>
            <div id="voxelLinksContainer" class="flex flex-wrap justify-center gap-4 text-sm">
                <!-- Links will be inserted here by JavaScript -->
            </div>
        </div>
    </footer>

    <!-- Full-screen Modal for Pattern Details -->
    <div id="patternModal" class="modal-overlay">
        <div class="modal-content w-full max-w-lg">
            <h2 id="modalTitle" class="text-2xl font-bold text-gray-900 mb-4 text-center"></h2>
            <p id="modalPattern" class="text-lg text-gray-700 font-mono break-words text-center mb-6"></p>
            <button id="copyToClipboardModal" class="w-full bg-green-500 text-white py-3 px-6 rounded-lg text-lg font-semibold hover:bg-green-600 transition-colors duration-200 shadow-md mb-4">
                Copy Pattern
            </button>
            <button id="modalBackButton" class="w-full bg-blue-600 text-white py-3 px-6 rounded-lg text-lg font-semibold hover:bg-blue-700 transition-colors duration-200 shadow-md">
                Back to Results
            </button>
        </div>
    </div>

    <!-- Copy Message Toast -->
    <div id="copyMessage" class="copy-message">
        Copied to clipboard!
    </div>

    <script>
        // The provided data structure
        const data = {
            "Sneakers": {
                "DUNK": [0, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.6, 0.7, 0.7, 0.7, 0.8, 0.8, 0.8],
                "CAMPUS": [0, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.6, 0.6, 0.7, 0.7, 0.7],
                "JORDAN": [0, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.5, 0.6, 0.6, 0.6, 0.7, 0.7, 0.7, 0.8, 0.8],
                "SUEDE": [0, 0.1, 0.1, 0.1, 0.2, 0.2, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.7, 0.7, 0.7, 0.8, 0.8, 0.8, 0.9, 0.9]
            },
            "Minecraft": {
                "CREEPER": [0, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.6, 0.6, 0.7, 0.7, 0.7, 0.8],
                "ENCHANT": [0.1, 0.1, 0.2, 0.2, 0.3, 0.3, 0.4, 0.5, 0.5, 0.6, 0.6, 0.7, 0.7, 0.8, 0.8, 0.9, 1, 1, 1.1, 1.1, 1.2, 1.2, 1.3, 1.4, 1.4],
                "FURNACE": [0, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.6, 0.7, 0.7, 0.7, 0.8, 0.8, 0.8],
                "PORTAL": [0.1, 0.2, 0.2, 0.3, 0.4, 0.5, 0.5, 0.6, 0.7, 0.8, 0.8, 0.9, 1, 1.1, 1.1, 1.2, 1.3, 1.4, 1.5, 1.5, 1.6, 1.7, 1.8, 1.8, 1.9]
            },
            "Geek": {
                "MOTHERBOARD": [0.1, 0.1, 0.2, 0.3, 0.4, 0.4, 0.5, 0.6, 0.7, 0.7, 0.8, 0.9, 1, 1, 1.1, 1.2, 1.3, 1.3, 1.4, 1.5, 1.6, 1.6, 1.7, 1.8, 1.9],
                "GAMER": [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1, 1.1, 1.2, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8, 1.9, 2, 2.1, 2.2, 2.3, 2.5, 2.6],
                "GPU": [0.2, 0.4, 0.6, 0.8, 1, 1.2, 1.5, 1.7, 1.9, 2.1, 2.3, 2.5, 2.7, 2.9, 3.1, 3.3, 3.5, 3.7, 3.9, 4.1, 4.4, 4.6, 4.8, 5, 5.2],
                "SWITCH": [0.2, 0.5, 0.7, 1, 1.2, 1.5, 1.7, 2, 2.2, 2.5, 2.7, 2.9, 3.2, 3.4, 3.7, 3.9, 4.2, 4.4, 4.7, 4.9, 5.1, 5.4, 5.6, 5.9, 6.1]
            },
            "Zoo": {
                "PONY": [0.1, 0.1, 0.2, 0.3, 0.3, 0.4, 0.4, 0.5, 0.6, 0.6, 0.7, 0.8, 0.8, 0.9, 1, 1, 1.1, 1.2, 1.2, 1.3, 1.3, 1.4, 1.5, 1.5, 1.6],
                "PIG": [0, 0.1, 0.1, 0.2, 0.2, 0.2, 0.3, 0.3, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.7, 0.7, 0.7, 0.8, 0.8, 0.9, 0.9, 0.9, 1, 1],
                "DRAGON": [0.1, 0.1, 0.2, 0.3, 0.3, 0.4, 0.5, 0.5, 0.6, 0.7, 0.7, 0.8, 0.9, 0.9, 1, 1.1, 1.2, 1.2, 1.3, 1.4, 1.4, 1.5, 1.6, 1.6, 1.7],
                "KOALA": [0, 0.1, 0.1, 0.2, 0.2, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.6, 0.6, 0.7, 0.7, 0.8, 0.8, 0.8, 0.9, 0.9, 1, 1, 1.1, 1.1]
            },
            "Rooms": {
                "BEDROOM": [0, 0, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.4, 0.4],
                "GAMEROOM": [0, 0, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.4, 0.4, 0.5],
                "GARAGE": [0, 0, 0, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4],
                "LIVINGROOM": [0, 0, 0, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4]
            },
            "Crypto": {
                "BITCOIN": [0.2, 0.3, 0.5, 0.7, 0.8, 1, 1.2, 1.3, 1.5, 1.6, 1.8, 2, 2.1, 2.3, 2.5, 2.6, 2.8, 3, 3.1, 3.3, 3.5, 3.6, 3.8, 3.9, 4.1],
                "ETHEREUM": [0.2, 0.3, 0.5, 0.7, 0.9, 1, 1.2, 1.3, 1.5, 1.6, 1.8, 2, 2.1, 2.3, 2.5, 2.6, 2.8, 3, 3.1, 3.3, 3.5, 3.6, 3.8, 3.9, 4.1],
                "TONCOIN": [0.2, 0.3, 0.5, 0.7, 0.9, 1, 1.2, 1.3, 1.5, 1.6, 1.8, 2, 2.1, 2.3, 2.5, 2.6, 2.8, 3, 3.1, 3.3, 3.5, 3.6, 3.8, 3.9, 4.1],
                "SOLANA": [0.2, 0.3, 0.5, 0.7, 0.9, 1, 1.2, 1.3, 1.5, 1.6, 1.8, 2, 2.1, 2.3, 2.5, 2.6, 2.8, 3, 3.1, 3.3, 3.5, 3.6, 3.8, 3.9, 4.1]
            },
            "Wild": {
                "SALOON": [0.1, 0.1, 0.2, 0.2, 0.3, 0.3, 0.4, 0.4, 0.5, 0.5, 0.6, 0.6, 0.7, 0.7, 0.8, 0.8, 0.9, 0.9, 1, 1, 1.1, 1.1, 1.2, 1.2, 1.3],
                "STAR": [0.3, 0.5, 0.8, 1.1, 1.3, 1.6, 1.8, 2.1, 2.4, 2.6, 2.9, 3.2, 3.4, 3.7, 4, 4.2, 4.5, 4.7, 5, 5.3, 5.5, 5.8, 6.1, 6.3, 6.6],
                "WHISKEY": [0, 0.1, 0.1, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.6, 0.7, 0.7, 0.8, 0.8, 0.8, 0.9, 0.9, 0.9],
                "WILDCACTUS": [0.1, 0.2, 0.4, 0.5, 0.6, 0.7, 0.8, 1, 1.1, 1.2, 1.3, 1.4, 1.5, 1.7, 1.8, 1.9, 2, 2.1, 2.3, 2.4, 2.5, 2.6, 2.7, 2.9, 3]
            },
            "Military": {
                "PANZER": [0, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.7, 0.7, 0.7, 0.8, 0.8, 0.8, 0.9],
                "TROOPS": [0.1, 0.3, 0.4, 0.6, 0.7, 0.9, 1, 1.2, 1.3, 1.4, 1.6, 1.7, 1.9, 2, 2.2, 2.3, 2.5, 2.6, 2.7, 2.9, 3, 3.2, 3.3, 3.5, 3.6],
                "KUBELWAGEN": [0.2, 0.3, 0.5, 0.6, 0.8, 1, 1.1, 1.3, 1.5, 1.6, 1.8, 1.9, 2.1, 2.3, 2.4, 2.6, 2.8, 2.9, 3.1, 3.2, 3.4, 3.6, 3.7, 3.9, 4.1],
                "MARDER": [0.1, 0.1, 0.2, 0.3, 0.3, 0.4, 0.5, 0.5, 0.6, 0.7, 0.7, 0.8, 0.9, 0.9, 1, 1.1, 1.1, 1.2, 1.3, 1.3, 1.4, 1.5, 1.5, 1.6, 1.7]
            },
            "Gamer": {
                "PC": [0, 0, 0.1, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5],
                "IMAC-PRO": [0.2, 0.3, 0.5, 0.7, 0.9, 1, 1.2, 1.4, 1.6, 1.7, 1.9, 2.1, 2.2, 2.4, 2.6, 2.8, 2.9, 3.1, 3.3, 3.5, 3.7, 3.9, 4.1, 4.4, 4.6, 4.8, 5, 5.2],
                "IMAC": [0.2, 0.4, 0.6, 0.8, 1, 1.2, 1.4, 1.6, 1.8, 2, 2.2, 2.4, 2.5, 2.7, 2.9, 3.1, 3.3, 3.5, 3.7, 3.9, 4.1, 4.3, 4.5, 4.7, 4.9],
                "GAMEPAD": [0.2, 0.5, 0.7, 1, 1.2, 1.5, 1.7, 2, 2.2, 2.5, 2.7, 3, 3.2, 3.5, 3.7, 4, 4.2, 4.5, 4.7, 5, 5.2, 5.4, 5.7, 5.9, 6.2]
            },
            "CS": {
                "CASE": [0.1, 0.1, 0.2, 0.2, 0.3, 0.4, 0.4, 0.5, 0.5, 0.6, 0.7, 0.7, 0.8, 0.8, 0.9, 1, 1, 1.1, 1.1, 1.2, 1.3, 1.3, 1.4, 1.4, 1.5],
                "KARAMBIT": [0.7, 1.4, 2.1, 2.8, 3.4, 4.1, 4.8, 5.5, 6.2, 6.9, 7.6, 8.3, 9, 9.7, 10.3, 11, 11.7, 12.4, 13.1, 13.8, 14.5, 15.2, 15.9, 16.6, 17.2],
                "MP9": [0.3, 0.5, 0.8, 1, 1.3, 1.6, 1.8, 2.1, 2.4, 2.6, 2.9, 3.1, 3.4, 3.7, 3.9, 4.2, 4.5, 4.7, 5, 5.2, 5.5, 5.8, 6, 6.3, 6.6],
                "USP": [0.5, 1, 1.5, 2, 2.5, 3, 3.4, 3.9, 4.4, 4.9, 5.4, 5.9, 6.4, 6.9, 7.4, 7.9, 8.4, 8.9, 9.4, 9.9, 10.3, 10.8, 11.3, 11.8, 12.3]
            },
            "Brawl": {
                "LEON": [0, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.6, 0.6, 0.7, 0.7, 0.7, 0.8],
                "NANI": [0.1, 0.1, 0.2, 0.2, 0.3, 0.3, 0.4, 0.4, 0.5, 0.5, 0.6, 0.6, 0.7, 0.7, 0.8, 0.8, 0.9, 0.9, 1, 1, 1.1, 1.1, 1.2, 1.2, 1.3],
                "MIKE": [0, 0, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.5, 0.5],
                "SPIKE": [0, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.6, 0.6, 0.7, 0.7, 0.7, 0.8]
            },
            "NFT": {
                "EVA": [0.1, 0.1, 0.2, 0.2, 0.3, 0.4, 0.4, 0.5, 0.6, 0.6, 0.7, 0.7, 0.8, 0.9, 0.9, 1, 1.1, 1.1, 1.2, 1.2, 1.3, 1.4, 1.4, 1.5, 1.5],
                "WALLE": [0, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.6, 0.6, 0.7, 0.7, 0.7]
            },
            "Army": {
                "IS-2": [0, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.6, 0.7, 0.7, 0.7, 0.8, 0.8],
                "T-34": [0, 0.1, 0.1, 0.1, 0.2, 0.2, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.7, 0.7, 0.7, 0.8, 0.8, 0.8, 0.9, 0.9],
                "M4": [0, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.6, 0.7, 0.7, 0.7, 0.8, 0.8, 0.8],
                "KV-1": [0, 0.1, 0.1, 0.1, 0.2, 0.2, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.7, 0.7, 0.7, 0.8, 0.8, 0.8, 0.9, 0.9]
            },
            "Sponge": {
                "SPONGEBOB": [0.1, 0.1, 0.2, 0.2, 0.3, 0.4, 0.4, 0.5, 0.6, 0.6, 0.7, 0.7, 0.8, 0.9, 0.9, 1, 1.1, 1.1, 1.2, 1.2, 1.3, 1.4, 1.4, 1.5, 1.5],
                "ANANAS": [0, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.6, 0.7, 0.7, 0.7, 0.8, 0.8, 0.8, 0.9],
                "SQUIDWARD": [0.1, 0.2, 0.3, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.8, 0.9, 1, 1.1, 1.2, 1.3, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8, 1.8, 1.9, 2, 2.1],
                "KRUSTY-KRAB": [0.1, 0.1, 0.2, 0.2, 0.3, 0.3, 0.4, 0.4, 0.5, 0.5, 0.6, 0.6, 0.7, 0.7, 0.8, 0.8, 0.9, 1, 1, 1.1, 1.1, 1.2, 1.2, 1.3, 1.3]
            },
            "Pokemon": {
                "CENTER": [0, 0, 0, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4],
                "PIKABALL": [0, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.6, 0.7, 0.7, 0.7, 0.8, 0.8],
                "PIKACHU": [0, 0.1, 0.1, 0.2, 0.2, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.6, 0.6, 0.7, 0.7, 0.7, 0.8, 0.8, 0.9, 0.9, 1, 1, 1.1, 1.1],
                "CARD": [0.1, 0.2, 0.3, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 0.9, 1, 1.1, 1.2, 1.3, 1.4, 1.4, 1.5, 1.6, 1.7, 1.8, 1.9, 2, 2, 2.1]
            },
            "Gifts": {
                "HOMECAKE": [0.1, 0.1, 0.2, 0.3, 0.3, 0.4, 0.4, 0.5, 0.6, 0.6, 0.7, 0.8, 0.8, 0.9, 1, 1, 1.1, 1.1, 1.2, 1.3, 1.3, 1.4, 1.5, 1.5, 1.6],
                "DUROV": [0.1, 0.2, 0.3, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.8, 0.9, 1, 1.1, 1.2, 1.3, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8, 1.8, 1.9, 2, 2.1],
                "PLAYER": [0.1, 0.2, 0.2, 0.3, 0.4, 0.5, 0.6, 0.6, 0.7, 0.8, 0.9, 1, 1, 1.1, 1.2, 1.3, 1.4, 1.4, 1.5, 1.6, 1.7, 1.8, 1.8, 1.9, 2],
                "PEPE": [0.1, 0.1, 0.2, 0.2, 0.3, 0.4, 0.4, 0.5, 0.6, 0.6, 0.7, 0.7, 0.8, 0.9, 0.9, 1, 1.1, 1.1, 1.2, 1.2, 1.3, 1.4, 1.4, 1.5, 1.5]
            },
            "Terraria": {
                "EYE": [0, 0, 0, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3],
                "ZENITH": [0.2, 0.3, 0.5, 0.6, 0.8, 1, 1.1, 1.3, 1.4, 1.6, 1.8, 1.9, 2.1, 2.2, 2.4, 2.6, 2.7, 2.9, 3, 3.2, 3.4, 3.5, 3.7, 3.8, 4],
                "TERRATREE": [0.1, 0.1, 0.2, 0.3, 0.4, 0.4, 0.5, 0.6, 0.7, 0.7, 0.8, 0.9, 0.9, 1, 1.1, 1.2, 1.2, 1.3, 1.4, 1.4, 1.5, 1.6, 1.7, 1.7, 1.8],
                "LUMINITE": [0.3, 0.6, 0.9, 1.1, 1.4, 1.7, 2, 2.3, 2.6, 2.9, 3.2, 3.4, 3.7, 4, 4.3, 4.6, 4.9, 5.2, 5.4, 5.7, 6, 6.3, 6.6, 6.9, 7.2]
            },
            "Primecut": {
                "KARAMBIT": [0.7, 1.4, 2.1, 2.8, 3.4, 4.1, 4.8, 5.5, 6.2, 6.9, 7.6, 8.3, 9, 9.7, 10.3, 11, 11.7, 12.4, 13.1, 13.8, 14.5, 15.2, 15.9, 16.6, 17.2],
                "ENCHANT": [0.1, 0.1, 0.2, 0.2, 0.3, 0.3, 0.4, 0.5, 0.5, 0.6, 0.6, 0.7, 0.7, 0.8, 0.8, 0.9, 1, 1, 1.1, 1.1, 1.2, 1.2, 1.3, 1.4, 1.4],
                "SWITCH": [0.2, 0.5, 0.7, 1, 1.2, 1.5, 1.7, 2, 2.2, 2.5, 2.7, 2.9, 3.2, 3.4, 3.7, 3.9, 4.2, 4.4, 4.7, 4.9, 5.1, 5.4, 5.6, 5.9, 6.1],
                "PORTAL": [0.1, 0.2, 0.2, 0.3, 0.4, 0.5, 0.5, 0.6, 0.7, 0.8, 0.8, 0.9, 1, 1.1, 1.1, 1.2, 1.3, 1.4, 1.5, 1.5, 1.6, 1.7, 1.8, 1.8, 1.9]
            },
            "Turtles": {
                "RAPHEAL": [0, 0, 0, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4],
                "MICHELANGELO": [0, 0, 0, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4],
                "LEONARDO": [0, 0, 0, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4],
                "DONATELLO": [0, 0, 0, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4]
            },
            "GFalls": {
                "JOURNAL": [0, 0, 0, 0, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.3],
                "MABEL": [0, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.6, 0.7, 0.7, 0.7, 0.7],
                "DIPPER": [0, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.6, 0.6, 0.7],
                "BILL": [0.1, 0.1, 0.2, 0.3, 0.3, 0.4, 0.5, 0.5, 0.6, 0.7, 0.7, 0.8, 0.9, 0.9, 1, 1.1, 1.1, 1.2, 1.3, 1.3, 1.4, 1.5, 1.5, 1.6, 1.7]
            },
            "Monsters": {
                "WAZOWSKI": [0, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.5, 0.6, 0.6, 0.6, 0.7, 0.7, 0.7],
                "ART": [0, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.7, 0.7, 0.7, 0.8, 0.8, 0.8, 0.9],
                "RANDAL": [0.1, 0.2, 0.3, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.8, 0.9, 1, 1.1, 1.2, 1.3, 1.4, 1.4, 1.5, 1.6, 1.7, 1.8, 1.9, 2, 2, 2.1],
                "SULLIVAN": [0, 0, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.5, 0.5, 0.6, 0.6]
            },
            "Southpark": {
                "ERIC": [0, 0.1, 0.1, 0.1, 0.2, 0.2, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.7, 0.7, 0.7, 0.8, 0.8, 0.8, 0.9, 0.9],
                "KYLE": [0, 0.1, 0.1, 0.2, 0.2, 0.2, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.6, 0.6, 0.7, 0.7, 0.7, 0.8, 0.8, 0.9, 0.9, 0.9, 1, 1],
                "STAN": [0, 0.1, 0.1, 0.2, 0.2, 0.3, 0.3, 0.4, 0.4, 0.5, 0.5, 0.6, 0.6, 0.7, 0.7, 0.8, 0.8, 0.9, 0.9, 1, 1, 1.1, 1.1, 1.2, 1.2],
                "KENNY": [0.1, 0.1, 0.2, 0.2, 0.3, 0.3, 0.4, 0.4, 0.5, 0.5, 0.6, 0.7, 0.7, 0.8, 0.8, 0.9, 0.9, 1, 1, 1.1, 1.2, 1.2, 1.3, 1.3, 1.4]
            },
            "Clashroyale": {
                "GOBLIN": [0, 0, 0.1, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5],
                "ROOSTER": [0, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.6, 0.6, 0.7],
                "CAMP": [0, 0, 0, 0, 0, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2],
                "WIZARD": [0, 0, 0, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4]
            },
            "Primecut2": {
                "JORDAN": [0, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.5, 0.6, 0.6, 0.6, 0.7, 0.7, 0.7, 0.8, 0.8],
                "LUMINITE": [0.3, 0.6, 0.9, 1.1, 1.4, 1.7, 2, 2.3, 2.6, 2.9, 3.2, 3.4, 3.7, 4, 4.3, 4.6, 4.9, 5.2, 5.4, 5.7, 6, 6.3, 6.6, 6.9, 7.2],
                "FURNACE": [0, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.6, 0.7, 0.7, 0.7, 0.8, 0.8, 0.8],
                "CASE": [0.1, 0.1, 0.2, 0.2, 0.3, 0.4, 0.4, 0.5, 0.6, 0.6, 0.7, 0.7, 0.8, 0.9, 0.9, 1, 1, 1.1, 1.1, 1.2, 1.2, 1.3, 1.4, 1.4, 1.5]
            },
            "Minicut": {
                "ROOSTER": [0, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.6, 0.6, 0.7],
                "ART": [0, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.6, 0.6, 0.7, 0.7, 0.7, 0.8, 0.8, 0.8, 0.9],
                "JOURNAL": [0, 0, 0, 0, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.3],
                "DUROV": [0.1, 0.2, 0.3, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.8, 0.9, 1, 1.1, 1.2, 1.3, 1.3, 1.4, 1.5, 1.6, 1.7, 1.8, 1.8, 1.9, 2, 2.1]
            },
            "Labubu": {
                "LABUBOX": [0, 0, 0, 0, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3],
                "LABUBU": [0, 0, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.5, 0.6],
                "SLABUBU": [0, 0, 0.1, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.5],
                "CLABUBU": [0, 0, 0.1, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.5]
            },
            "Mcdonalds": {
                "BURGER": [0, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.5, 0.6, 0.6, 0.6, 0.6, 0.7],
                "COKE": [0, 0.1, 0.1, 0.1, 0.1, 0.2, 0.2, 0.2, 0.2, 0.3, 0.3, 0.3, 0.3, 0.4, 0.4, 0.4, 0.4, 0.5, 0.5, 0.5, 0.5, 0.6, 0.6, 0.6, 0.7],
                "NUGGETS": [0.1, 0.1, 0.2, 0.2, 0.3, 0.3, 0.4, 0.4, 0.5, 0.6, 0.6, 0.7, 0.7, 0.8, 0.8, 0.9, 0.9, 1, 1.1, 1.1, 1.2, 1.2, 1.3, 1.3, 1.4],
                "POTATO": [0.1, 0.1, 0.2, 0.2, 0.3, 0.3, 0.4, 0.5, 0.5, 0.6, 0.6, 0.7, 0.7, 0.8, 0.8, 0.9, 1, 1, 1.1, 1.1, 1.2, 1.2, 1.3, 1.4, 1.4]
            },
            "Uno": {
                "R-CARD": [0.1, 0.2, 0.2, 0.3, 0.4, 0.5, 0.6, 0.6, 0.7, 0.8, 0.9, 0.9, 1, 1.1, 1.2, 1.3, 1.3, 1.4, 1.5, 1.6, 1.7, 1.7, 1.8, 1.9, 2],
                "SKIP-CARD": [0.1, 0.2, 0.2, 0.3, 0.4, 0.5, 0.6, 0.6, 0.7, 0.8, 0.9, 0.9, 1, 1.1, 1.2, 1.3, 1.3, 1.4, 1.5, 1.6, 1.7, 1.7, 1.8, 1.9, 2],
                "WILD-CARD": [0.1, 0.2, 0.2, 0.3, 0.4, 0.5, 0.6, 0.6, 0.7, 0.8, 0.9, 0.9, 1, 1.1, 1.2, 1.3, 1.3, 1.4, 1.5, 1.6, 1.7, 1.7, 1.8, 1.9, 2],
                "WILD-DRAWW": [0.1, 0.2, 0.2, 0.3, 0.4, 0.5, 0.6, 0.6, 0.7, 0.8, 0.9, 0.9, 1, 1.1, 1.2, 1.3, 1.3, 1.4, 1.5, 1.6, 1.7, 1.7, 1.8, 1.9, 2]
            }
        };

        // Global variable to store the selected display option
        let currentDisplayOption = 'full'; // Default to full pattern

        // Flag to ensure links are only added once
        let voxelLinksAdded = false;

        // Get modal elements
        const patternModal = document.getElementById('patternModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalPattern = document.getElementById('modalPattern');
        const modalBackButton = document.getElementById('modalBackButton');
        const copyToClipboardModalButton = document.getElementById('copyToClipboardModal');
        const copyMessage = document.getElementById('copyMessage');

        /**
         * Formats a numerical pattern array into a compressed string like "0.1^3, 0.2^2".
         * @param {Array<number>} pattern The numerical pattern array.
         * @returns {string} The compressed string representation.
         */
        function compressPattern(pattern) {
            if (!pattern || pattern.length === 0) {
                return "";
            }

            const compressedParts = [];
            let i = 0;
            while (i < pattern.length) {
                const currentValue = pattern[i];
                let count = 0;
                let j = i;
                while (j < pattern.length && pattern[j] === currentValue) {
                    count++;
                    j++;
                }
                // Use <sup> tag for superscript
                compressedParts.push(`${currentValue}<sup>${count}</sup>`);
                i = j;
            }
            return compressedParts.join(', ');
        }

        /**
         * Displays a temporary message (toast) to the user.
         * @param {string} message The message to display.
         * @param {number} duration The duration in milliseconds for the message to be visible.
         */
        function showMessage(message, duration = 2000) {
            copyMessage.textContent = message;
            copyMessage.classList.add('show');
            setTimeout(() => {
                copyMessage.classList.remove('show');
            }, duration);
        }

        /**
         * Copies text to the clipboard.
         * Uses document.execCommand('copy') for better iframe compatibility.
         * @param {string} text The text to copy.
         */
        function copyToClipboard(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            textarea.style.position = 'fixed'; // Prevent scrolling to bottom of page
            textarea.style.left = '-9999px'; // Hide it
            document.body.appendChild(textarea);
            textarea.select();
            try {
                document.execCommand('copy');
                showMessage('Copied to clipboard!');
            } catch (err) {
                console.error('Failed to copy text: ', err);
                showMessage('Failed to copy!');
            } finally {
                document.body.removeChild(textarea);
            }
        }

        /**
         * Displays a single matched pattern in the results container.
         * Adds a click listener to open the modal and a copy button.
         * @param {string} categoryName The name of the category.
         * @param {string} itemName The name of the item/model.
         * @param {Array<number>} pattern The numerical pattern array.
         */
        function displayMatch(categoryName, itemName, pattern) {
            const container = document.getElementById("result");
            // Clear any "no match" message or previous single match
            if (container.querySelector('.no-match-message')) {
                container.innerHTML = '';
            }

            // Determine which part of the pattern to display based on currentDisplayOption
            let displayedPattern;
            if (currentDisplayOption === 'full') {
                displayedPattern = pattern.join(', ');
            } else if (currentDisplayOption === 'first5') {
                displayedPattern = pattern.slice(0, 5).join(', ') + (pattern.length > 5 ? '...' : '');
            } else if (currentDisplayOption === 'compressed') {
                displayedPattern = compressPattern(pattern);
            }

            // Create a new div for the match
            const div = document.createElement("div");
            div.className = "bg-green-50 p-4 rounded-lg border border-green-200 text-left shadow-sm mb-4 relative"; // Added relative for positioning copy button
            div.innerHTML = `
                <p class="font-medium text-green-800 mb-1">
                    <span class="text-green-900">${categoryName}</span>: ${itemName}
                </p>
                <p class="text-sm text-green-700 break-words">
                    Pattern: <span class="font-mono text-green-900" data-full-pattern="${JSON.stringify(pattern)}">${displayedPattern}</span>
                </p>
                <button class="copy-button absolute top-4 right-4 bg-blue-500 text-white p-2 rounded-full shadow-md hover:bg-blue-600 transition-colors duration-150" title="Copy Pattern">
                    <svg class="lucide lucide-copy w-4 h-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                        <rect width="14" height="14" x="8" y="8" rx="2" ry="2"></rect>
                        <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path>
                    </svg>
                </button>
            `;

            // Add click listener to open modal (excluding the copy button)
            div.addEventListener('click', (e) => {
                if (!e.target.closest('.copy-button')) { // Only open modal if copy button not clicked
                    openPatternModal(categoryName, itemName, pattern);
                }
            });

            // Add click listener for the copy button
            div.querySelector('.copy-button').addEventListener('click', (e) => {
                e.stopPropagation(); // Prevent modal from opening when copy button is clicked
                copyToClipboard(pattern.join(', ')); // Always copy the full pattern
            });

            container.appendChild(div);
        }

        /**
         * Displays a "no match found" message in the results container.
         */
        function displayNoMatch() {
            const container = document.getElementById("result");
            container.innerHTML = `
                <div class="text-gray-400 italic text-center no-match-message">
                    No match found. Try "Gamer", "PC", or "0.1, 0.2".
                </div>
            `;
        }

        /**
         * Matches the input string against categories, models, and numerical patterns.
         * Displays all relevant matches.
         * @param {string} input The user's search input.
         */
        function matchPattern(input) {
            const container = document.getElementById("result");
            container.innerHTML = ""; // Clear previous results

            const lowerCaseInput = input.toLowerCase().trim();
            // Use a Map to store unique matches, keyed by "categoryName-itemName" to prevent duplicates
            const foundMatches = new Map();

            // If input is empty, display the initial prompt and return
            if (lowerCaseInput === "") {
                displayNoMatch();
                return;
            }

            // --- Comprehensive Search Logic ---
            for (const categoryName in data) {
                const lowerCaseCategory = categoryName.toLowerCase();

                // 1. Check if the input is a partial match for the category name
                if (lowerCaseCategory.includes(lowerCaseInput)) {
                    // If the input matches a category (even partially), add all models from that category
                    for (const itemName in data[categoryName]) {
                        const key = `${categoryName}-${itemName}`;
                        if (!foundMatches.has(key)) {
                            foundMatches.set(key, { category: categoryName, item: itemName, pattern: data[categoryName][itemName] });
                        }
                    }
                }

                // 2. Check if the input is a partial match for any model name within any category
                for (const itemName in data[categoryName]) {
                    const lowerCaseItem = itemName.toLowerCase();
                    if (lowerCaseItem.includes(lowerCaseInput)) {
                        const key = `${categoryName}-${itemName}`;
                        if (!foundMatches.has(key)) {
                            foundMatches.set(key, { category: categoryName, item: itemName, pattern: data[categoryName][itemName] });
                        }
                    }
                }
            }

            // 3. Numerical pattern search
            // Split input by comma and filter out empty strings, then check if all parts are numbers
            const inputPartsForNumerical = lowerCaseInput.split(',').map(s => s.trim()).filter(Boolean);
            const isPotentialNumericalPattern = inputPartsForNumerical.length > 0 && inputPartsForNumerical.every(part => !isNaN(parseFloat(part)));

            if (isPotentialNumericalPattern) {
                for (const categoryName in data) {
                    for (const itemName in data[categoryName]) {
                        const pattern = data[categoryName][itemName];

                        // Check if the data pattern starts with the input numerical sequence
                        let currentMatch = true;
                        if (pattern.length >= inputPartsForNumerical.length) {
                            for (let i = 0; i < inputPartsForNumerical.length; i++) {
                                const userVal = parseFloat(inputPartsForNumerical[i]);
                                const patVal = pattern[i];

                                // Compare numerical values
                                if (isNaN(userVal) || userVal !== patVal) {
                                    currentMatch = false;
                                    break;
                                }
                            }
                        } else {
                            currentMatch = false; // Input pattern is longer than data pattern, cannot be a starting match
                        }

                        if (currentMatch) {
                            const key = `${categoryName}-${itemName}`;
                            if (!foundMatches.has(key)) {
                                foundMatches.set(key, { category: categoryName, item: itemName, pattern: data[categoryName][itemName] });
                            }
                        }
                    }
                }
            }

            // Display all found matches or the no-match message
            if (foundMatches.size > 0) {
                // Convert Map values to an array and sort for consistent display
                const sortedMatches = Array.from(foundMatches.values()).sort((a, b) => {
                    // Sort primarily by category name, then by item name
                    const categoryCompare = a.category.localeCompare(b.category);
                    if (categoryCompare !== 0) {
                        return categoryCompare;
                    }
                    return a.item.localeCompare(b.item);
                });

                sortedMatches.forEach(match => {
                    displayMatch(match.category, match.item, match.pattern);
                });
            } else {
                displayNoMatch();
            }
        }

        /**
         * Dynamically adds Voxel social media links to the footer.
         * Ensures links are added only once.
         */
        function addVoxelLinks() {
            if (voxelLinksAdded) {
                return; // Prevent adding links multiple times
            }

            const links = [
                { href: "https://t.me/voxel_verse_bot/app?startapp=6022063582", text: "Telegram Voxel Bot  टेलीग्राम" },
                { href: "https://discord.gg/voxelverse", text: "Discord Voxelverse" },
                { href: "https://x.com/VOXELVerseApp?t=LwdJnEWdwJIKIP_aMGA5kw&s=09", text: "VoxelVerseApp on X (Twitter)" },
                { href: "https://youtube.com/@voxelproject?si=cy_A1ZqF_ZeT4z53", text: "Voxel Project YouTube" }
            ];

            const container = document.getElementById("voxelLinksContainer");
            const ul = document.createElement("ul");
            ul.className = "flex flex-wrap justify-center gap-4 text-sm"; // Apply Tailwind classes to the ul

            links.forEach(linkData => {
                const li = document.createElement("li");
                const a = document.createElement("a");
                a.href = linkData.href;
                a.target = "_blank";
                a.className = "text-blue-400 hover:text-blue-200 transition-colors duration-200"; // Tailwind classes
                a.textContent = linkData.text;
                li.appendChild(a);
                ul.appendChild(li);
            });
            container.appendChild(ul);
            voxelLinksAdded = true; // Set flag to true after adding links
        }

        /**
         * Opens the full-screen modal with the selected pattern details.
         * @param {string} categoryName The category of the clicked item.
         * @param {string} itemName The name of the clicked item.
         * @param {Array<number>} fullPattern The complete numerical pattern.
         */
        function openPatternModal(categoryName, itemName, fullPattern) {
            modalTitle.textContent = `${categoryName}: ${itemName}`;

            // Apply the same display logic as the main results section
            let displayedPatternInModal;
            if (currentDisplayOption === 'full') {
                displayedPatternInModal = fullPattern.join(', ');
            } else if (currentDisplayOption === 'first5') {
                displayedPatternInModal = fullPattern.slice(0, 5).join(', ') + (fullPattern.length > 5 ? '...' : '');
            } else if (currentDisplayOption === 'compressed') {
                displayedPatternInModal = compressPattern(fullPattern);
            }
            modalPattern.innerHTML = displayedPatternInModal; // Use innerHTML to render <sup> tags

            // Set the data-full-pattern attribute on the modal's copy button for easy access
            copyToClipboardModalButton.dataset.fullPattern = JSON.stringify(fullPattern);

            patternModal.classList.add('show');
        }

        /**
         * Closes the full-screen modal.
         */
        function closePatternModal() {
            patternModal.classList.remove('show');
        }

        // Get the pattern input element
        const patternInput = document.getElementById("patternInput");

        // Event listener for live search input
        patternInput.addEventListener("input", (e) => {
            matchPattern(e.target.value);
        });

        // Event listener for pattern display option change
        document.getElementById("patternDisplayOption").addEventListener("change", (e) => {
            currentDisplayOption = e.target.value;
            // Re-run the search with the current input to update the display
            const currentInput = document.getElementById("patternInput").value;
            matchPattern(currentInput);
        });

        // Event listener for the modal's back button
        modalBackButton.addEventListener('click', closePatternModal);

        // Event listener for the modal's copy button
        copyToClipboardModalButton.addEventListener('click', () => {
            const fullPatternString = copyToClipboardModalButton.dataset.fullPattern;
            if (fullPatternString) {
                const fullPattern = JSON.parse(fullPatternString);
                copyToClipboard(fullPattern.join(', '));
            }
        });

        // Optional: Close modal if clicking outside the content (on the overlay)
        patternModal.addEventListener('click', (e) => {
            if (e.target === patternModal) {
                closePatternModal();
            }
        });

        // Initialize Lucide icons, add Voxel links, and render recent searches on DOMContentLoaded
        document.addEventListener('DOMContentLoaded', () => {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
            // Display initial prompt when the page loads
            displayNoMatch();
            addVoxelLinks(); // Call the function to add links
        });
    </script>
</body>
</html>
